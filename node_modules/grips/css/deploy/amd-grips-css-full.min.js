/* grips-css (c) 2012-2015 Kyle Simpson | http://getify.mit-license.org/ */
;(function(){(function(t){function r(){function e(){var e=t.grips.css;return t.grips.css=old_grips.css,e}function n(e){return e.trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}function i(e){return p.btoa(unescape(encodeURIComponent(n(e))))}function s(e){return decodeURIComponent(escape(p.atob(selector)))}function o(e,t){var n="",r,i;t=t!==!1;if(Array.isArray(e))for(r=0;r<e.length;r++)n+=a(e[r],null,t);else if(typeof e=="object")for(i in e)e.hasOwnProperty(i)&&(n+=a(e[i],i,t));return n}function u(e,t){if(!t)throw v;return a(e,t,!1)}function a(e,t,n){n=n!==!1;try{if(p.tokenizer.process(e,t))return p.parser.end(),p.generator.process(n)}catch(r){throw v}return!1}function f(e){}function l(e,t){f(t)}function c(e,t,n){if(!e)return"";var r;if(r!==!1)return r;throw v}var h=t.grips,p,d={},v=new Error("Unknown error");return p={compile:o,compileChunk:u,compileFile:a,initialize:f,initializeFile:l,render:c,noConflict:e,sandbox:r,trim:n,encodeSelector:i,decodeSelector:s},t&&t.atob?(p.atob=t.atob.bind(t),p.btoa=t.btoa.bind(t)):typeof require!="undefined"&&(p.atob=require("atob"),p.btoa=require("btoa")),p}var n=t.grips.css;t.grips.css=r()})(this),function(t,n,r){function s(){var e;do e=Math.floor(Math.random()*1e9);while(e in a);return e}function o(e,t){function o(e){var t,n,r,i;for(r=0;r<e.length;r++)if(e[r].type===M){t=n=r;for(i=t+1;i<e.length;i++){n=i;if(e[i].type!==M){n=i-1;break}}if(n>t){for(i=t+1;i<=n;i++)e[t].val+=e[i].val;e.splice(t+1,n-t)}else r=i}return e}function B(e){for(var t=0;t<e.length;t++)e[t].type===M&&(e[t].val=e[t].val.replace(/\\\\/g,"\\"));return e}function j(){var e,s,a;if(Z){tmp=Z.match(/[^a-z0-9.@;#_-\s]/i);if(!!tmp)return H;tmp=Z.split(/(\s+)/);for(i=0;i<tmp.length;i++)tmp[i]&&(e=new n.tokenizer.Token({type:null,val:tmp[i]}),/^\s+$/.test(tmp[i])?e.type=S:e.type=M,u.push(e))}if(G){e=new n.tokenizer.Token({type:_,val:G[0]});if(G[0]==="@import")e.type=f;else if(G[0]==="/*")e.type=l;else if(G[0]==="//")e.type=c;else if(G[0]==="@*")e.type=p;else if(G[0]==="{")e.type=d;else if(G[0]==="(")e.type=m;else if(G[0]==="[")e.type=y;else if(G[0]==="]")e.type=b;else if(G[0]===",")e.type=N;else if(G[0]===":")e.type=x;else if(G[0]==="::")e.type=T;else if(/[~|^$*]?\=/.test(G[0]))e.type=O;else if(/^[>+~]$/.test(G[0]))e.type=A;else if(/^["']$/.test(G[0]))e.type=w,P[r.parser.STATE.STRING_LITERAL]=new RegExp(G[0],"g"),P[r.parser.STATE.STRING_LITERAL].lastIndex=0;else{if(G[0]!="*")return H;e.type=C}u.push(e)}u=u.concat(s=B(o(u.splice(Q-u.length)))),et=r.parser.nodify(s,t),Q=u.length}function F(){var i,s,a;Z&&u.push(new n.tokenizer.Token({type:M,val:Z})),G&&(a=e.substring(0,J-G[0].length),i=new n.tokenizer.Token({type:null,val:G[0]}),!a||r.parser.state==r.parser.STATE.SL_COMMENT||D.test(a)?i.type=h:i.type=M,u.push(i)),u=u.concat(s=B(o(u.splice(Q-u.length)))),et=r.parser.nodify(s,t),Q=u.length}function I(){var i,s,a;if(Z){tmp=Z.match(/[^a-z0-9._-]/i);if(!!tmp)return H;u.push(new n.tokenizer.Token({type:M,val:Z}))}if(G){a=e.substring(0,J-G[0].length),i=new n.tokenizer.Token({type:null,val:G[0]});if(G[0]===";")i.type=E;else if(/^\s+$/.test(G[0]))i.type=S;else{if(!/^["']$/.test(G[0]))return H;i.type=w,P[r.parser.STATE.STRING_LITERAL]=new RegExp(G[0],"g"),P[r.parser.STATE.STRING_LITERAL].lastIndex=0}u.push(i)}u=u.concat(s=B(o(u.splice(Q-u.length)))),et=r.parser.nodify(s,t),Q=u.length}function q(){var e,i,s;if(Z){tmp=Z.match(/[^a-z0-9._-]/i);if(!!tmp)return H;u.push(new n.tokenizer.Token({type:M,val:Z}))}if(G){e=new n.tokenizer.Token({type:null,val:G[0]});if(G[0]===",")e.type=N;else if(G[0]===":")e.type=x;else if(G[0]===")")e.type=g;else if(/^\s+$/.test(G[0]))e.type=S;else{if(!/^["']$/.test(G[0]))return H;e.type=w,P[r.parser.STATE.STRING_LITERAL]=new RegExp(G[0],"g"),P[r.parser.STATE.STRING_LITERAL].lastIndex=0}u.push(e)}u=u.concat(i=B(o(u.splice(Q-u.length)))),et=r.parser.nodify(i,t),Q=u.length}function R(){var i,s,a;Z&&u.push(new n.tokenizer.Token({type:M,val:Z})),G&&(a=e.substring(0,J-G[0].length),i=new n.tokenizer.Token({type:null,val:G[0]}),!a||D.test(a)?(i.type=w,P[r.parser.STATE.STRING_LITERAL]=null):i.type=M,u.push(i)),u=u.concat(s=B(o(u.splice(Q-u.length)))),et=r.parser.nodify(s,t),Q=u.length}function U(){var e,i,s,a;if(Z){tmp=Z.match(/[^a-z0-9%.#_-\s]/i);if(!!tmp)return H;tmp=Z.split(/(\s+)/);for(a=0;a<tmp.length;a++)tmp[a]&&(e=new n.tokenizer.Token({type:null,val:tmp[a]}),/^\s+$/.test(tmp[a])?e.type=S:e.type=M,u.push(e))}if(G){e=new n.tokenizer.Token({type:_,val:G[0]});if(G[0]==="/*")e.type=l;else if(G[0]==="//")e.type=c;else if(G[0]==="{")e.type=d;else if(G[0]==="}")e.type=v;else if(G[0]==="(")e.type=m;else if(G[0]==="[")e.type=y;else if(G[0]==="]")e.type=b;else if(G[0]===",")e.type=N;else if(G[0]===";")e.type=E;else if(G[0]===":")e.type=x;else if(G[0]==="::")e.type=T;else if(G[0]==="*")e.type=C;else if(G[0]==="=")e.type=k;else if(G[0]==="|")e.type=L;else if(/[~|^$*]?\=/.test(G[0]))e.type=O;else if(/^[>+~]$/.test(G[0]))e.type=A;else{if(!/^["']$/.test(G[0]))return H;e.type=w,P[r.parser.STATE.STRING_LITERAL]=new RegExp(G[0],"g"),P[r.parser.STATE.STRING_LITERAL].lastIndex=0}u.push(e)}u=u.concat(i=B(o(u.splice(Q-u.length)))),et=r.parser.nodify(i,t),Q=u.length}function z(){var i,s,a;Z&&u.push(new n.tokenizer.Token({type:M,val:Z}));if(G){a=e.substring(0,J-G[0].length),i=new n.tokenizer.Token({type:null,val:G[0]});if(G[0]==="/*")i.type=l;else if(G[0]==="//")i.type=c;else if(G[0]===":")i.type=x;else if(G[0]===";")i.type=E;else if(G[0]==="}")i.type=v;else if(G[0]==="=")i.type=k;else{if(!/^\s+$/.test(G[0]))return H;i.type=S}u.push(i)}u=u.concat(s=B(o(u.splice(Q-u.length)))),et=r.parser.nodify(s,t),Q=u.length}function W(){var i,s,a;Z&&u.push(new n.tokenizer.Token({type:M,val:Z}));if(G){a=e.substring(0,J-G[0].length),i=new n.tokenizer.Token({type:null,val:G[0]});if(G[0]==="/*")i.type=l;else if(G[0]==="//")i.type=c;else if(G[0]===";")i.type=E;else if(G[0]==="}")i.type=v;else if(G[0]==="|")i.type=L;else{if(!/^\s+$/.test(G[0]))return H;i.type=S}u.push(i)}u=u.concat(s=B(o(u.splice(Q-u.length)))),et=r.parser.nodify(s,t),Q=u.length}function X(){var e,i,s;if(Z){tmp=Z.match(/[^a-z0-9._-]/i);if(!!tmp)return H;u.push(new n.tokenizer.Token({type:M,val:Z}))}if(G){e=new n.tokenizer.Token({type:null,val:G[0]});if(G[0]==="|")e.type=L;else if(G[0]===":")e.type=x;else if(G[0]==="=")e.type=k;else if(G[0]===";")e.type=E;else if(/^\s+$/.test(G[0]))e.type=S;else{if(!/^["']$/.test(G[0]))return H;e.type=w,P[r.parser.STATE.STRING_LITERAL]=new RegExp(G[0],"g"),P[r.parser.STATE.STRING_LITERAL].lastIndex=0}u.push(e)}u=u.concat(i=B(o(u.splice(Q-u.length)))),et=r.parser.nodify(i,t),Q=u.length}function V(){var e,i,s,a;Z&&u.push(new n.tokenizer.Token({type:M,val:Z})),G&&(e=new n.tokenizer.Token({type:_,val:G[0]}),G[0]==="/*"?e.type=l:G[0]==="//"?e.type=c:/^["']$/.test(G[0])?(e.type=w,P[r.parser.STATE.STRING_LITERAL]=new RegExp(G[0],"g"),P[r.parser.STATE.STRING_LITERAL].lastIndex=0):G[0]===";"?e.type=E:G[0]==="*"?e.type=C:G[0]==="="?e.type=k:G[0]==="}"?e.type=v:e.type=M,u.push(e)),u=u.concat(i=B(o(u.splice(Q-u.length)))),et=r.parser.nodify(i,t),Q=u.length}var $,J=0,K=0,Q=u.length,G,Y,Z,et,tt,nt,rt=[j,F,F,I,q,R,U,z,W,X,V];t||(t=s(),a[t]=!0,t="chunk_"+t);while((!et||et===!0)&&J<e.length){Z="",et=null,Y=r.parser.state;if(Y===r.parser.STATE.INVALID)break;$=P[Y];if(!$){et=H;break}$.lastIndex=J,G=$.exec(e);if(G)K=J,J=$.lastIndex,K<J-G[0].length&&(Z=e.substring(K,J-G[0].length));else{K=J,J=e.length,Z=e.substr(K);if(!Z)break}nt=rt[Y]();if(nt&&nt!==!0)break;if(et&&et!==!0)break}if(nt instanceof Error)throw nt;if(et instanceof Error)throw et;return!0}var u=[],a={},f=0,l=1,c=2,h=3,p=4,d=5,v=6,m=7,g=8,y=9,b=10,w=11,E=12,S=13,x=14,T=15,N=16,C=17,k=18,L=19,A=20,O=21,M=22,_=23,D=/(?:[^\\]|(?:^|[^\\])(?:\\\\)+)$/,P=[/(?:@import(?=\s)|\/\*|\/\/|@\*|::|[~|^$*]\=)|[{("',>+~:\[\]=*]/g,/\*\//g,/\r?\n/g,/[;"']|\s+/g,/[:,\)"']|\s+|(?:\/\*|\/\/)/g,null,/::|[~|^$*]\=|[=;:*|{}"'(,>+~\[\]]|(?:\/\*|\/\/)/g,/[=;:}]|(?:\/\*|\/\/)/g,/\s+|(?:\/\*|\/\/)|[^a-zA-Z0-9_]/g,/[;:=|"'}]|\s+|(?:\/\*|\/\/)/g,/[;"'=}*]|(?:\/\*|\/\/)/g],H=new Error("Unknown error");r.tokenizer={IMPORT:f,MLCOMMENT_START:l,SLCOMMENT_START:c,COMMENT_CLOSE:h,ATSTAR:p,BRACE_OPEN:d,BRACE_CLOSE:v,PAREN_OPEN:m,PAREN_CLOSE:g,BRACKET_OPEN:y,BRACKET_CLOSE:b,QUOTE:w,SEMICOLON:E,WHITESPACE:S,COLON:x,DOUBLECOLON:T,COMMA:N,STAR:C,EQUALS:k,PIPE:L,COMBINATOR:A,ATTR_MATCH:O,GENERAL:M,UNKNOWN:_,process:o}}(this,this.grips,this.grips.css),function(t,n,r){function i(e){n.parser.Node.call(this,e)}function s(e,t){function n(){d.complete=!0,K.state=d.previous_state,delete d.previous_state,d=d.parent}function s(e){var t;t=new i({parent:null,type:J,token:e,children:[],complete:!1,previous_state:K.state});if(e.type===r.tokenizer.IMPORT)t.type=_,K.state=E;else if(e.type===r.tokenizer.MLCOMMENT_START)t.type=D,K.state=b;else if(e.type===r.tokenizer.SLCOMMENT_START)t.type=D,K.state=w;else if(e.type===r.tokenizer.ATSTAR)t.type=P,K.state=N;else if(e.type===r.tokenizer.BRACE_OPEN)t.type=H,K.state=T;else if(e.type===r.tokenizer.PAREN_OPEN)t.type=B,K.state=S;else if(e.type===r.tokenizer.BRACKET_OPEN)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.BRACKET_CLOSE)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.QUOTE)K.state=x,t.type=j,t.val="",t.delimiter=e.val;else if(e.type===r.tokenizer.COMMA)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.COLON)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.DOUBLECOLON)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.ATTR_MATCH)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.COMBINATOR)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.STAR)t.type=O,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.EQUALS)t.type=q,K.state=C;else if(e.type===r.tokenizer.WHITESPACE)t.type=U,t.complete=!0,delete t.previous_state,delete t.children;else{if(e.type!==r.tokenizer.GENERAL)return K.state=A,Q;t.type=O,t.complete=!0,delete t.previous_state,delete t.children}d?(t.parent=d,d.children.push(t)):(delete t.parent,p.push(t)),t.complete||(d=t)}function o(e){if(e.type===r.tokenizer.COMMENT_CLOSE)n();else{if(e.type!==r.tokenizer.GENERAL)return K.state=A,Q;d.children.push(new i({parent:d,type:O,token:e,complete:!0}))}}function u(e){var t;t=new i({parent:d,type:J,token:e,children:[],complete:!1,previous_state:K.state});if(e.type===r.tokenizer.SEMICOLON){n();return}if(e.type===r.tokenizer.QUOTE)t.type=j,t.val="",t.delimiter=e.val,K.state=x,d.children.push(t),d=t;else{if(e.type===r.tokenizer.WHITESPACE)return;if(e.type!==r.tokenizer.GENERAL)return K.state=A,Q;t.type=O,delete t.children,d.children.push(t)}}function a(e){var t;if(d.type===B){if(e.type===r.tokenizer.PAREN_CLOSE){n();return}t=new i({parent:d,type:I,token:e,children:[],complete:!1}),d.children.push(t),d=t}d.type===I&&(e.type===r.tokenizer.PAREN_CLOSE?(K.state=d.parent.previous_state,delete d.parent.previous_state,d.complete=!0,d.parent.complete=!0,d=d.parent.parent):(t=new i({parent:d,type:J,token:e,complete:!1}),d.children.push(t),e.type===r.tokenizer.GENERAL?(t.type=O,t.complete=!0):e.type===r.tokenizer.QUOTE?(t.previous_state=K.state,t.type=j,t.val="",t.delimiter=e.val,K.state=x,d=t):e.type===r.tokenizer.COLON?(t.type=F,t.complete=!0):e.type===r.tokenizer.WHITESPACE?d.children.pop():e.type===r.tokenizer.COMMA&&(d.children.pop(),d.complete=!0,d=d.parent)))}function f(e){if(e.type===r.tokenizer.QUOTE&&e.val===d.delimiter)n();else{if(e.type!==r.tokenizer.GENERAL)return K.state=A,Q;d.val+=e.val}}function l(e){var t;t=new i({parent:d,type:J,token:e,children:[],complete:!1,previous_state:K.state});if(e.type===r.tokenizer.MLCOMMENT_START)t.type=D,K.state=b;else if(e.type===r.tokenizer.SLCOMMENT_START)t.type=D,K.state=w;else if(e.type===r.tokenizer.BRACE_OPEN)t.type=H,K.state=T;else{if(e.type===r.tokenizer.BRACE_CLOSE){n();return}if(e.type===r.tokenizer.PAREN_OPEN)t.type=B,K.state=S;else if(e.type===r.tokenizer.BRACKET_OPEN)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.BRACKET_CLOSE)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.QUOTE)K.state=x,t.type=j,t.val="",t.delimiter=e.val;else if(e.type===r.tokenizer.COMMA)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.SEMICOLON)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.COLON)K.state=L,t.type=X;else if(e.type===r.tokenizer.DOUBLECOLON)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else{if(e.type===r.tokenizer.STAR){t.type=P,d.children.push(t),d=new i({parent:t,type:W,token:e,children:[],complete:!1,previous_state:N}),t.children.push(d),K.state=N;return}if(e.type===r.tokenizer.EQUALS)t.type=q,K.state=C;else if(e.type===r.tokenizer.PIPE)t.type=R,K.state=k;else if(e.type===r.tokenizer.ATTR_MATCH)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.COMBINATOR)t.type=F,t.complete=!0,delete t.previous_state,delete t.children;else if(e.type===r.tokenizer.WHITESPACE)t.type=U,t.complete=!0,delete t.previous_state,delete t.children;else{if(e.type!==r.tokenizer.GENERAL)return K.state=A,Q;t.type=O,t.complete=!0,delete t.previous_state,delete t.children}}}d?(t.parent=d,d.children.push(t)):(delete t.parent,p.push(t)),t.complete||(d=t)}function c(e){var t;d.type===W&&d.children.length===0&&(d.token=e),t=new i({parent:d,type:J,token:e,children:[],complete:!1,previous_state:K.state});if(e.type===r.tokenizer.SEMICOLON)return n(),null;if(e.type===r.tokenizer.BRACE_CLOSE)return n(),G[K.state](e);if(e.type===r.tokenizer.MLCOMMENT_START)t.type=D,K.state=b,d.children.push(t),d=t;else if(e.type===r.tokenizer.SLCOMMENT_START)t.type=D,K.state=w,d.children.push(t),d=t;else if(e.type===r.tokenizer.COLON)t.type=X,t.parent=d.parent,t.parent.children.push(t),d.complete=!0,d=t,K.state=L;else{if(e.type!==r.tokenizer.GENERAL)return K.state=A,Q;t.type=O,t.complete=!0,delete t.children,delete t.previous_state,d.children.push(t)}}function h(e){if(e.type!==r.tokenizer.GENERAL)return n(),G[K.state](e);d.children.push(new i({parent:d,type:O,token:e,complete:!0}))}function v(e){var t;if(d.type===R){if(e.type===r.tokenizer.SEMICOLON)return n(),G[K.state](e);t=new i({parent:d,type:I,token:e,children:[],complete:!1}),d.children.push(t),d=t}if(d.type===I){if(e.type===r.tokenizer.SEMICOLON)return K.state=d.parent.previous_state,delete d.parent.previous_state,d.complete=!0,d.parent.complete=!0,d=d.parent.parent,G[K.state](e);t=new i({parent:d,type:J,token:e,complete:!1}),d.children.push(t);if(e.type===r.tokenizer.MLCOMMENT_START)t.type=D,K.state=b;else if(e.type===r.tokenizer.SLCOMMENT_START)t.type=D,K.state=w;else if(e.type===r.tokenizer.QUOTE)t.previous_state=K.state,t.type=j,t.val="",t.delimiter=e.val,K.state=x,d=t;else if(e.type===r.tokenizer.COLON)t.type=F,t.complete=!0;else if(e.type===r.tokenizer.WHITESPACE)d.children.pop();else if(e.type===r.tokenizer.PIPE)d.children.pop(),d.complete=!0,d=d.parent;else if(e.type===r.tokenizer.EQUALS)t.previous_state=K.state,t.type=q,t.children=[],K.state=C,d=t;else{if(e.type!==r.tokenizer.GENERAL)return K.state=A,Q;t.type=O,t.complete=!0}}}function g(e){var t;d.children.length===0&&(d.token=e),t=new i({parent:d,type:J,token:e,children:[],complete:!1,previous_state:K.state});if(e.type===r.tokenizer.MLCOMMENT_START)t.type=D,K.state=b,d.children.push(t),d=t;else if(e.type===r.tokenizer.SLCOMMENT_START)t.type=D,K.state=w,d.children.push(t),d=t;else if(e.type===r.tokenizer.QUOTE)K.state=x,t.type=j,t.val="",t.delimiter=e.val,d.children.push(t),d=t;else{if(e.type===r.tokenizer.SEMICOLON)return n(),K.state===N?G[K.state](e):null;if(e.type===r.tokenizer.BRACE_CLOSE)return n(),G[K.state](e);if(e.type===r.tokenizer.STAR)d.parent.type!==P||d.children.length!==0&&!/(?:^|,)\s*$/.test(d.showChildren())?t.type=F:t.type=$,t.complete=!0,delete t.previous_state,delete t.children,d.children.push(t);else if(e.type===r.tokenizer.EQUALS)t.type=q,K.state=C,d.children.push(t),d=t;else{if(e.type!==r.tokenizer.WHITESPACE&&e.type!==r.tokenizer.GENERAL)return K.state=A,Q;t.type=O,t.complete=!0,delete t.previous_state,delete t.children,d.children.push(t)}}}var y,z,V,G=[s,o,o,u,a,f,l,c,h,v,g];t!==m&&(m&&p.push(new r.parser.Node({type:M,close:m,complete:!0})),m=t,p.push(new r.parser.Node({type:M,start:t,complete:!0})));for(y=0;y<e.length;y++){if(K.state===A)return Q;V=G[K.state](e[y]);if(V)return V}return!0}function o(){m&&p.push(new r.parser.Node({type:M,close:m,complete:!0})),m=null}function u(e){var t,n,r,i;for(r=0;r<e.length;r++)if(e[r].type===O){t=n=r;for(i=t+1;i<e.length;i++){n=i;if(e[i].type!==O){n--;break}}if(n>t){for(i=t+1;i<=n;i++)e[t].token.val+=e[i].token.val,e[t].val+=e[i].val;e.splice(t+1,n-t)}else r=i}return a(e)}function a(e){var t,n,r,i;for(r=0;r<e.length;r++)if(e[r].type===U){t=n=r;for(i=t+1;i<e.length;i++){n=i;if(e[i].type!==U){n--;break}}if(n>t){for(i=t+1;i<=n;i++)e[t].token.val+=e[i].token.val,e[t].val+=e[i].val;e.splice(t+1,n-t)}else r=i}return e}function f(e){var t=[],n=0,r=e.length-1;while(n<=r){e[n].type===U&&n++,e[r].type===U&&r--;if(!(n<r)||e[n].type!==U&&e[r].type!==U)break}return n<=r&&(t=e.slice(n,r+1)),t}function l(e){var t=[],n,r;if(e.children&&e.children.length>0){e.children=u(e.children);for(r=0;r<e.children.length;r++)"parent"in e.children[r]||(e.children[r].parent=e),n=c(e.children[r]),n&&t.push(n);e.children=u(t)}}function c(e){var t,n,s=e.parent;delete e.parent,delete e.previous_state;if(v&&v.type===J)if(e.type===M||e.type===_||e.type===F&&e.token.type===r.tokenizer.UNKNOWN)v.complete=!0,v.children=u(v.children),v=null;else if(e.type===H)v.type=z,v.complete=!0,v.parent=s,c(v),v.children=u(v.children),v=null;else if(e.type===X)v.type=W,v.complete=!0,v.parent=s,c(v),v.children=u(v.children),v=null;else{if(e.type===F&&e.token.type===r.tokenizer.SEMICOLON)return v.type=V,v.complete=!0,v.parent=s,c(v),v.children=u(v.children),v=null,null;e.type===F&&e.token.type===r.tokenizer.BRACE_CLOSE&&(v.type=V,v.complete=!0,v.parent=s,c(v),v.children=u(v.children),v=null)}if(!s||s.type===H){if(e.type===O||e.type===F||e.type===q||e.type===j)return v?(v.children.push(e),null):(v=new i({type:J,token:e.token,children:[e],complete:!1}),s&&(v.parent=s),e.parent=v,v);if(e.type===B||e.type===R||e.type===U||e.type===D)return v?(v.children.push(e),null):e;if(e.type===_||e.type===z||e.type===P||e.type===H||e.type===W||e.type===X)return l(e),e;if(e.type===V){for(n=0;n<e.children.length;n++)if(e.children[n].type!==O&&e.children[n].type!==U&&e.children[n].type!==F&&e.children[n].type!==j&&e.children[n].type!==D&&e.children[n].type!==R)throw Q;return l(e),e}if(e.type===M)return e.start?m=e.start:e.close&&(m=null),e;throw Q}return e.type===B||e.type===R||e.type===I?(l(e),e):e}function h(){var e;while(g<p.length&&!e&&p[g].complete)e=c(p[g++]);return e}i.prototype=Object.create(n.parser.Node),i.prototype.showChildren=function(){var e,t="";if(this.children)for(var e=0;e<this.children.length;e++)this.children[e].type!==U&&(t+=this.children[e].toString());return t};var p=[],d,v,m="",g=0,y=0,b=1,w=2,E=3,S=4,x=5,T=6,N=7,C=8,k=9,L=10,A=11,O=0,M=1,_=2,D=3,P=4,H=5,B=6,j=7,F=8,I=9,q=10,R=11,U=12,z=13,W=14,X=15,V=16,$=17,J=18,K,Q=new Error("Unknown error");K={STATE:{OUTSIDE:y,ML_COMMENT:b,SL_COMMENT:w,IMPORT:E,PARAMS:S,STRING_LITERAL:x,INSIDE:T,PREFIX_EXPANSION:N,VARIABLE:C,SET_PARAMS:k,INVALID:A},TEXT:O,FILE_MARKER:M,IMPORT_DIRECTIVE:_,COMMENT:D,PREFIX_EXPANDER:P,RULES_BODY:H,PARAM_LIST:B,STRING_LITERAL:j,OPERATOR:F,PARAM:I,VARIABLE:q,SET_PARAMS:R,WHITESPACE:U,SELECTOR:z,RULE_PROPERTY:W,RULE_VALUE:X,INCLUDE_REF:V,PREFIX_INCLUDE:$,UNKNOWN:J,state:y,nodify:s,end:o,parseNextNode:h,dumpNodes:function(){return JSON.stringify(p,null,"	")},Node:i},r.parser=K}(this,this.grips,this.grips.css),function(t,n,r){function i(e){return e.replace(/\\([\s\S])|(")/g,"\\$1$2")}function s(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}function o(e){return e.replace(/\\(?!\\*\")/g,"\\\\")}function u(){return x.length>0?x[x.length-1]+" ":""}function a(e){var t="";return e.children[0].type===r.parser.TEXT?t=e.children[0].token.val:e.children[0].type===r.parser.STRING_LITERAL&&(t=e.children[0].val),S+='{$= @"'+t+'#all" $}\n','{$+ "'+t+'" $}\n'}function f(e){var t="/*";return e.children[0].token.type===r.tokenizer.SLCOMMENT_START&&(t+="//"),t+=e.children[0].token.val+"*/",t}function l(e){return e.delimiter+e.val+e.delimiter}function c(e){if(e.type===r.parser.TEXT||e.type===r.parser.WHITESPACE||e.type===r.parser.OPERATOR)return e.token.val;if(e.type===r.parser.STRING_LITERAL)return l(e);if(e.type===r.parser.COMMENT)return f(e)}function h(e){var t="",n="",i;for(i=0;i<e.children.length;i++){if(e.children[i].type===r.parser.OPERATOR&&e.children[i].token.type===r.tokenizer.COLON)break;e.children[i].type!==r.parser.WHITESPACE&&e.children[i].type!==r.parser.COMMENT&&(t+=e.children[i].token.val)}for(i+=1;i<e.children.length;i++)e.children[i].type!==r.parser.WHITESPACE&&e.children[i].type!==r.parser.COMMENT&&(e.children[i].type===r.parser.STRING_LITERAL?n+='"'+e.children[i].val+'"':e.children[i].type===r.parser.VARIABLE?n+=d(e.children[i]):n+='"'+e.children[i].token.val+'"');return[t,n]}function p(e){function t(e){var t=h(e);return t[0]+" = "+t[0]+" ? "+t[0]+" : "+t[1]}var n="",i="",s,o,a,f;for(a=0;a<e.children.length;a++)if(s=c(e.children[a]))n+=s;else if(e.children[a].type===r.parser.PARAM_LIST)for(f=0;f<e.children[a].children.length;f++)e.children[a].children[f].type===r.parser.PARAM&&(i+=" | "+t(e.children[a].children[f]));return n=u()+r.trim(n),x.push(n),o=r.encodeSelector(n),S+='{$= @"#'+o+'" $}\n','{$: "#'+o+'" }'+n+' {{$= @"#'+o+'_" $}}{$}\n'+'{$: "#'+o+'_"'+i+" }"}function d(e){var t="",n,r;for(r=0;r<e.children.length;r++)if(n=c(e.children[r]))t+=n;return t}function v(e){var t="",n,r;for(r=0;r<e.children.length;r++)if(n=c(e.children[r]))t+=n;return t}function m(e){var t="",n,i;for(i=0;i<e.children.length;i++)(n=c(e.children[i]))?t+=n:e.children[i].type===r.parser.VARIABLE?t+="{$= "+d(e.children[i])+" $}":e.children[i].type===r.parser.PREFIX_INCLUDE&&(t+="{$= __vprfx__ $}");return t}function g(e){var t="";return t+='{$* $.__prefixes__ | __vprfx__ = vendor_prefix ? vendor_prefix : _.value | $.__newline = _.last ? "" : "\\n" }',t+="{$= __vprfx__ $}"+v(e.children[0])+":"+m(e.children[1])+";{$= $.__newline $}",t+="{$}",t}function y(e){var t="",n="",i,s;for(s=0;s<e.children.length;s++)if(i=c(e.children[s]))t+=i;else if(e.children[s].type===r.parser.SELECTOR)i=p(e.children[s]),n+=i;else if(e.children[s].type===r.parser.RULES_BODY)i=y(e.children[s]),n+=i;else if(e.children[s].type===r.parser.INCLUDE_REF)i=b(e.children[s]),t+=i;else if(e.children[s].type===r.parser.RULE_PROPERTY)i=v(e.children[s]),t+=i;else if(e.children[s].type===r.parser.RULE_VALUE)i=m(e.children[s]),t+=":"+i+";";else{if(e.children[s].type!==r.parser.PREFIX_EXPANDER)throw E;i=g(e.children[s]),t+=i}return x.pop(),t+"{$}\n"+(n!==""?n+"\n":"")}function b(e){function t(e){var t=h(e);return t[0]+" = "+t[1]}var n="",i="",s,o,u,a;for(u=0;u<e.children.length;u++)if(s=c(e.children[u]))n+=s;else if(e.children[u].type===r.parser.SET_PARAMS)for(a=0;a<e.children[u].children.length;a++)e.children[u].children[a].type===r.parser.PARAM&&(i+=(i!==""?" | ":"")+t(e.children[u].children[a]));return n=r.trim(n),o=r.encodeSelector(n),"{$# "+i+' }{$= @"#'+o+'_" $}{$}'}function w(e){var t,n=0,i,s=[],o="",u="",f,l;while(t=r.parser.parseNextNode()){s.push(t);for(i=n;i<s.length&&s[i].complete;i++,n++){t=s[i];if(t.type===r.parser.FILE_MARKER)t.start?S='\n{$: "#all" }':t.close&&(f=S+"{$}\n",o+=f,u+=f,S="");else if(f=c(t))S+=f;else if(t.type===r.parser.IMPORT_DIRECTIVE)f=a(t),o+=f,u+=f;else if(t.type===r.parser.SELECTOR)f=p(t),o+=f,u+=f;else{if(t.type!==r.parser.RULES_BODY)throw E;f=y(t),o+=f,u+=f}}}return u}var E=new Error("Unknown error"),S="",x=[];r.generator={process:w}}(this,this.grips,this.grips.css);var t=this.grips.css;typeof define=="function"&&define.amd&&define(t)}).call({grips:this.grips||{}});